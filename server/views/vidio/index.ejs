<%- include('../templeteAdmin/sidebar') %>
<body>  
    <div class="content">       
        <h1>Product Member</h1>
        <a href='/det/formcreate' class="btn btn-primary">Create</a>
        <br>
        <table class="data-table">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Name Vidio</th>
                    <th>Vidio</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                    <% vidios.forEach((vidios, index) => { %>
                    <tr>
                    <th scope="row"><%= index + 1 %></th>
                    <td><%= vidios.name_vidio %></td>
                    <td><video src="<%= vidios.vidio %>" width="100" height="70" controls></video></td>
                      <td>
                        <!-- <button type="button" class="btn btn-primary" href=" <%= vidios.id %>">Edit</button> -->
                     
                        <a href="#" class="btn btn-icon btn-danger" onclick="deleteRoom('<%= vidios.id %>')">
                           Delete
                        </a>
                    </td>
                  </tr>
                <% }); %>
                </tbody>
        </table>
    </div>
<script>
    function deleteRoom(idDelete) {
        if (confirm("Are you sure you want to delete this vidio?")) {
            fetch(`/det/delete/${idDelete}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json',
                    // You may need to include additional headers depending on your server requirements
                },
                // You can include a request body if needed
                // body: JSON.stringify({ roomId: roomId }),
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }else{
                    window.location.href = '/det/index'
                }
                // You can handle success here, e.g., redirect to a different page
                // window.location.href = '/success-page';
            })
            .catch(error => {
                console.error('Error:', error);
                // Handle the error as needed
            });
        }
    }
</script>
</body>



