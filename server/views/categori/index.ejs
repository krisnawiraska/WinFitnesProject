<%- include('../templeteAdmin/sidebar') %>
<body>

    <div class="content">
        
        <h1>Categori Traning</h1>
        <a href='/tranings/formcreate' class="btn btn-primary">Create</a>
        <br>
        <table class="data-table">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Name</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                    <% traning.forEach((traning, index) => { %>
                    <tr>
                    <th scope="row"><%= index + 1 %></th>
                    <td><%= traning.name_category_traning %></td>

                    <td>
                        <a href="/tranings/one/<%= traning.id %>" type="button" class="btn btn-primary" >Edit</a>

                        <a href="#" class="btn btn-icon btn-danger" onclick="deleteRoom('<%= traning.id %>')">
                            Delete
                         </a>
                    </td>
                  </tr>
                <% }); %>
                </tbody>
        </table>
    </div>
    <script>
        function deleteRoom(category_traing_id) {
            if (confirm("Are you sure you want to delete this category?")) {
                fetch(`/tranings/delete/${category_traing_id}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json',
                        // You may need to include additional headers depending on your server requirements
                    },
                    // You can include a request body if needed
                    // body: JSON.stringify({ roomId: roomId }),
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! Status: ${response.status}`);
                    }else{
                        window.location.href = '/tranings'
                    }
                    // You can handle success here, e.g., redirect to a different page
                    // window.location.href = '/success-page';
                })
                .catch(error => {
                    console.error('Error:', error);
                    // Handle the error as needed
                });
            }
        }
    </script>
</body>

